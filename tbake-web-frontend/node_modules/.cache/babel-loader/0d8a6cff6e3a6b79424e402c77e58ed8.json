{"ast":null,"code":"var _jsxFileName = \"/Users/danialfajar/Downloads/tbake-web-staking-platform-master/src/views/Pools/components/PoolCard/CardFooter/ExpandedFooter.tsx\",\n    _s = $RefreshSig$();\n\nimport React from 'react';\nimport BigNumber from 'bignumber.js';\nimport styled from 'styled-components';\nimport { getBalanceNumber } from 'utils/formatBalance';\nimport { useTranslation } from 'contexts/Localization';\nimport { Flex, MetamaskIcon, Text, TooltipText, LinkExternal, TimerIcon, Skeleton, useTooltip, Button } from '@pancakeswap/uikit';\nimport { BASE_BSC_SCAN_URL, BASE_URL } from 'config';\nimport { useBlock, useCakeVault } from 'state/hooks';\nimport { getAddress, getCakeVaultAddress } from 'utils/addressHelpers';\nimport { registerToken } from 'utils/wallet';\nimport Balance from 'components/Balance';\nimport { getPoolBlockInfo } from 'views/Pools/helpers';\nimport { jsxDEV as _jsxDEV } from \"react/jsx-dev-runtime\";\nimport { Fragment as _Fragment } from \"react/jsx-dev-runtime\";\nconst ExpandedWrapper = styled(Flex)`\n  svg {\n    height: 14px;\n    width: 14px;\n  }\n`;\n_c = ExpandedWrapper;\n\nconst ExpandedFooter = ({\n  pool,\n  account\n}) => {\n  _s();\n\n  var _ethereum;\n\n  const {\n    t\n  } = useTranslation();\n  const {\n    currentBlock\n  } = useBlock();\n  const {\n    totalCakeInVault,\n    fees: {\n      performanceFee\n    }\n  } = useCakeVault();\n  const {\n    stakingToken,\n    earningToken,\n    totalStaked,\n    contractAddress,\n    sousId,\n    isAutoVault\n  } = pool;\n  const tokenAddress = earningToken.address ? getAddress(earningToken.address) : '';\n  const poolContractAddress = getAddress(contractAddress);\n  const cakeVaultContractAddress = getCakeVaultAddress();\n  const imageSrc = `${BASE_URL}/images/tokens/${earningToken.symbol.toLowerCase()}.png`;\n  const isMetaMaskInScope = !!((_ethereum = window.ethereum) === null || _ethereum === void 0 ? void 0 : _ethereum.isMetaMask);\n  const isManualCakePool = sousId === 0;\n  const {\n    shouldShowBlockCountdown,\n    blocksUntilStart,\n    blocksRemaining,\n    hasPoolStarted,\n    blocksToDisplay\n  } = getPoolBlockInfo(pool, currentBlock);\n  const {\n    targetRef,\n    tooltip,\n    tooltipVisible\n  } = useTooltip(t('Subtracted automatically from each yield harvest and burned.'), {\n    placement: 'bottom-start'\n  });\n\n  const getTotalStakedBalance = () => {\n    if (isAutoVault) {\n      return getBalanceNumber(totalCakeInVault, stakingToken.decimals);\n    }\n\n    if (isManualCakePool) {\n      const manualCakeTotalMinusAutoVault = new BigNumber(totalStaked).minus(totalCakeInVault);\n      return getBalanceNumber(manualCakeTotalMinusAutoVault, stakingToken.decimals);\n    }\n\n    return getBalanceNumber(totalStaked, stakingToken.decimals);\n  };\n\n  return /*#__PURE__*/_jsxDEV(ExpandedWrapper, {\n    flexDirection: \"column\",\n    children: [/*#__PURE__*/_jsxDEV(Flex, {\n      mb: \"2px\",\n      justifyContent: \"space-between\",\n      alignItems: \"center\",\n      children: [/*#__PURE__*/_jsxDEV(Text, {\n        small: true,\n        children: [t('Total staked'), \":\"]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 76,\n        columnNumber: 9\n      }, this), /*#__PURE__*/_jsxDEV(Flex, {\n        alignItems: \"flex-start\",\n        children: totalStaked ? /*#__PURE__*/_jsxDEV(_Fragment, {\n          children: [/*#__PURE__*/_jsxDEV(Balance, {\n            fontSize: \"14px\",\n            value: getTotalStakedBalance()\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 80,\n            columnNumber: 15\n          }, this), /*#__PURE__*/_jsxDEV(Text, {\n            ml: \"4px\",\n            fontSize: \"14px\",\n            children: stakingToken.symbol\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 81,\n            columnNumber: 15\n          }, this)]\n        }, void 0, true) : /*#__PURE__*/_jsxDEV(Skeleton, {\n          width: \"90px\",\n          height: \"21px\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 86,\n          columnNumber: 13\n        }, this)\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 77,\n        columnNumber: 9\n      }, this)]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 75,\n      columnNumber: 7\n    }, this), shouldShowBlockCountdown && /*#__PURE__*/_jsxDEV(Flex, {\n      mb: \"2px\",\n      justifyContent: \"space-between\",\n      alignItems: \"center\",\n      children: [/*#__PURE__*/_jsxDEV(Text, {\n        small: true,\n        children: [hasPoolStarted ? t('End') : t('Start'), \":\"]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 92,\n        columnNumber: 11\n      }, this), /*#__PURE__*/_jsxDEV(Flex, {\n        alignItems: \"center\",\n        children: [blocksRemaining || blocksUntilStart ? /*#__PURE__*/_jsxDEV(Balance, {\n          color: \"primary\",\n          fontSize: \"14px\",\n          value: blocksToDisplay,\n          decimals: 0\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 95,\n          columnNumber: 15\n        }, this) : /*#__PURE__*/_jsxDEV(Skeleton, {\n          width: \"54px\",\n          height: \"21px\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 97,\n          columnNumber: 15\n        }, this), /*#__PURE__*/_jsxDEV(Text, {\n          ml: \"4px\",\n          color: \"primary\",\n          small: true,\n          textTransform: \"lowercase\",\n          children: t('Blocks')\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 99,\n          columnNumber: 13\n        }, this), /*#__PURE__*/_jsxDEV(TimerIcon, {\n          ml: \"4px\",\n          color: \"primary\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 102,\n          columnNumber: 13\n        }, this)]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 93,\n        columnNumber: 11\n      }, this)]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 91,\n      columnNumber: 9\n    }, this), isAutoVault && /*#__PURE__*/_jsxDEV(Flex, {\n      mb: \"2px\",\n      justifyContent: \"space-between\",\n      alignItems: \"center\",\n      children: [tooltipVisible && tooltip, /*#__PURE__*/_jsxDEV(TooltipText, {\n        ref: targetRef,\n        small: true,\n        children: t('Performance Fee')\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 109,\n        columnNumber: 11\n      }, this), /*#__PURE__*/_jsxDEV(Flex, {\n        alignItems: \"center\",\n        children: /*#__PURE__*/_jsxDEV(Text, {\n          ml: \"4px\",\n          small: true,\n          children: [performanceFee / 100, \"%\"]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 113,\n          columnNumber: 13\n        }, this)\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 112,\n        columnNumber: 11\n      }, this)]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 107,\n      columnNumber: 9\n    }, this), /*#__PURE__*/_jsxDEV(Flex, {\n      mb: \"2px\",\n      justifyContent: \"flex-end\",\n      children: /*#__PURE__*/_jsxDEV(LinkExternal, {\n        bold: false,\n        small: true,\n        href: earningToken.projectLink,\n        children: t('View Project Site')\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 120,\n        columnNumber: 9\n      }, this)\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 119,\n      columnNumber: 7\n    }, this), poolContractAddress && /*#__PURE__*/_jsxDEV(Flex, {\n      mb: \"2px\",\n      justifyContent: \"flex-end\",\n      children: /*#__PURE__*/_jsxDEV(LinkExternal, {\n        bold: false,\n        small: true,\n        href: `${BASE_BSC_SCAN_URL}/address/${isAutoVault ? cakeVaultContractAddress : poolContractAddress}`,\n        children: t('View Contract')\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 126,\n        columnNumber: 11\n      }, this)\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 125,\n      columnNumber: 9\n    }, this), account && isMetaMaskInScope && tokenAddress && /*#__PURE__*/_jsxDEV(Flex, {\n      justifyContent: \"flex-end\",\n      children: /*#__PURE__*/_jsxDEV(Button, {\n        variant: \"text\",\n        p: \"0\",\n        height: \"auto\",\n        onClick: () => registerToken(tokenAddress, earningToken.symbol, earningToken.decimals, imageSrc),\n        children: [/*#__PURE__*/_jsxDEV(Text, {\n          color: \"primary\",\n          fontSize: \"14px\",\n          children: t('Add to Metamask')\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 143,\n          columnNumber: 13\n        }, this), /*#__PURE__*/_jsxDEV(MetamaskIcon, {\n          ml: \"4px\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 146,\n          columnNumber: 13\n        }, this)]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 137,\n        columnNumber: 11\n      }, this)\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 136,\n      columnNumber: 9\n    }, this)]\n  }, void 0, true, {\n    fileName: _jsxFileName,\n    lineNumber: 74,\n    columnNumber: 5\n  }, this);\n};\n\n_s(ExpandedFooter, \"8r2ySPsr0VL+6FIlw4jiX2Cn9tc=\", false, function () {\n  return [useTranslation, useBlock, useCakeVault, useTooltip];\n});\n\n_c2 = ExpandedFooter;\nexport default _c3 = /*#__PURE__*/React.memo(ExpandedFooter);\n\nvar _c, _c2, _c3;\n\n$RefreshReg$(_c, \"ExpandedWrapper\");\n$RefreshReg$(_c2, \"ExpandedFooter\");\n$RefreshReg$(_c3, \"%default%\");","map":{"version":3,"sources":["/Users/danialfajar/Downloads/tbake-web-staking-platform-master/src/views/Pools/components/PoolCard/CardFooter/ExpandedFooter.tsx"],"names":["React","BigNumber","styled","getBalanceNumber","useTranslation","Flex","MetamaskIcon","Text","TooltipText","LinkExternal","TimerIcon","Skeleton","useTooltip","Button","BASE_BSC_SCAN_URL","BASE_URL","useBlock","useCakeVault","getAddress","getCakeVaultAddress","registerToken","Balance","getPoolBlockInfo","ExpandedWrapper","ExpandedFooter","pool","account","t","currentBlock","totalCakeInVault","fees","performanceFee","stakingToken","earningToken","totalStaked","contractAddress","sousId","isAutoVault","tokenAddress","address","poolContractAddress","cakeVaultContractAddress","imageSrc","symbol","toLowerCase","isMetaMaskInScope","window","ethereum","isMetaMask","isManualCakePool","shouldShowBlockCountdown","blocksUntilStart","blocksRemaining","hasPoolStarted","blocksToDisplay","targetRef","tooltip","tooltipVisible","placement","getTotalStakedBalance","decimals","manualCakeTotalMinusAutoVault","minus","projectLink","memo"],"mappings":"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","sourcesContent":["import React from 'react'\nimport BigNumber from 'bignumber.js'\nimport styled from 'styled-components'\nimport { getBalanceNumber } from 'utils/formatBalance'\nimport { useTranslation } from 'contexts/Localization'\nimport {\n  Flex,\n  MetamaskIcon,\n  Text,\n  TooltipText,\n  LinkExternal,\n  TimerIcon,\n  Skeleton,\n  useTooltip,\n  Button,\n} from '@pancakeswap/uikit'\nimport { BASE_BSC_SCAN_URL, BASE_URL } from 'config'\nimport { useBlock, useCakeVault } from 'state/hooks'\nimport { Pool } from 'state/types'\nimport { getAddress, getCakeVaultAddress } from 'utils/addressHelpers'\nimport { registerToken } from 'utils/wallet'\nimport Balance from 'components/Balance'\nimport { getPoolBlockInfo } from 'views/Pools/helpers'\n\ninterface ExpandedFooterProps {\n  pool: Pool\n  account: string\n}\n\nconst ExpandedWrapper = styled(Flex)`\n  svg {\n    height: 14px;\n    width: 14px;\n  }\n`\n\nconst ExpandedFooter: React.FC<ExpandedFooterProps> = ({ pool, account }) => {\n  const { t } = useTranslation()\n  const { currentBlock } = useBlock()\n  const {\n    totalCakeInVault,\n    fees: { performanceFee },\n  } = useCakeVault()\n\n  const { stakingToken, earningToken, totalStaked, contractAddress, sousId, isAutoVault } = pool\n\n  const tokenAddress = earningToken.address ? getAddress(earningToken.address) : ''\n  const poolContractAddress = getAddress(contractAddress)\n  const cakeVaultContractAddress = getCakeVaultAddress()\n  const imageSrc = `${BASE_URL}/images/tokens/${earningToken.symbol.toLowerCase()}.png`\n  const isMetaMaskInScope = !!(window as WindowChain).ethereum?.isMetaMask\n  const isManualCakePool = sousId === 0\n\n  const { shouldShowBlockCountdown, blocksUntilStart, blocksRemaining, hasPoolStarted, blocksToDisplay } =\n    getPoolBlockInfo(pool, currentBlock)\n\n  const { targetRef, tooltip, tooltipVisible } = useTooltip(\n    t('Subtracted automatically from each yield harvest and burned.'),\n    { placement: 'bottom-start' },\n  )\n\n  const getTotalStakedBalance = () => {\n    if (isAutoVault) {\n      return getBalanceNumber(totalCakeInVault, stakingToken.decimals)\n    }\n    if (isManualCakePool) {\n      const manualCakeTotalMinusAutoVault = new BigNumber(totalStaked).minus(totalCakeInVault)\n      return getBalanceNumber(manualCakeTotalMinusAutoVault, stakingToken.decimals)\n    }\n    return getBalanceNumber(totalStaked, stakingToken.decimals)\n  }\n\n  return (\n    <ExpandedWrapper flexDirection=\"column\">\n      <Flex mb=\"2px\" justifyContent=\"space-between\" alignItems=\"center\">\n        <Text small>{t('Total staked')}:</Text>\n        <Flex alignItems=\"flex-start\">\n          {totalStaked ? (\n            <>\n              <Balance fontSize=\"14px\" value={getTotalStakedBalance()} />\n              <Text ml=\"4px\" fontSize=\"14px\">\n                {stakingToken.symbol}\n              </Text>\n            </>\n          ) : (\n            <Skeleton width=\"90px\" height=\"21px\" />\n          )}\n        </Flex>\n      </Flex>\n      {shouldShowBlockCountdown && (\n        <Flex mb=\"2px\" justifyContent=\"space-between\" alignItems=\"center\">\n          <Text small>{hasPoolStarted ? t('End') : t('Start')}:</Text>\n          <Flex alignItems=\"center\">\n            {blocksRemaining || blocksUntilStart ? (\n              <Balance color=\"primary\" fontSize=\"14px\" value={blocksToDisplay} decimals={0} />\n            ) : (\n              <Skeleton width=\"54px\" height=\"21px\" />\n            )}\n            <Text ml=\"4px\" color=\"primary\" small textTransform=\"lowercase\">\n              {t('Blocks')}\n            </Text>\n            <TimerIcon ml=\"4px\" color=\"primary\" />\n          </Flex>\n        </Flex>\n      )}\n      {isAutoVault && (\n        <Flex mb=\"2px\" justifyContent=\"space-between\" alignItems=\"center\">\n          {tooltipVisible && tooltip}\n          <TooltipText ref={targetRef} small>\n            {t('Performance Fee')}\n          </TooltipText>\n          <Flex alignItems=\"center\">\n            <Text ml=\"4px\" small>\n              {performanceFee / 100}%\n            </Text>\n          </Flex>\n        </Flex>\n      )}\n      <Flex mb=\"2px\" justifyContent=\"flex-end\">\n        <LinkExternal bold={false} small href={earningToken.projectLink}>\n          {t('View Project Site')}\n        </LinkExternal>\n      </Flex>\n      {poolContractAddress && (\n        <Flex mb=\"2px\" justifyContent=\"flex-end\">\n          <LinkExternal\n            bold={false}\n            small\n            href={`${BASE_BSC_SCAN_URL}/address/${isAutoVault ? cakeVaultContractAddress : poolContractAddress}`}\n          >\n            {t('View Contract')}\n          </LinkExternal>\n        </Flex>\n      )}\n      {account && isMetaMaskInScope && tokenAddress && (\n        <Flex justifyContent=\"flex-end\">\n          <Button\n            variant=\"text\"\n            p=\"0\"\n            height=\"auto\"\n            onClick={() => registerToken(tokenAddress, earningToken.symbol, earningToken.decimals, imageSrc)}\n          >\n            <Text color=\"primary\" fontSize=\"14px\">\n              {t('Add to Metamask')}\n            </Text>\n            <MetamaskIcon ml=\"4px\" />\n          </Button>\n        </Flex>\n      )}\n    </ExpandedWrapper>\n  )\n}\n\nexport default React.memo(ExpandedFooter)\n"]},"metadata":{},"sourceType":"module"}